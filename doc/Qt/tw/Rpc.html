<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Qt XML RPC：Rpc（正體中文）</title>
    <link href="../classic.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div align="center">
      <h1>Qt XML RPC：Rpc（正體中文）</h1>
    </div>
    <hr size="2" width="100%">
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody>
        <tr>
          <td valign="top"><a href="../index.html">Qt XML RPC</a> </td>
          <td valign="top"><a href="index.html">Qt XML RPC（正體中文）</a> </td>
          <td valign="top"><br>
          </td>
          <td valign="top"><br>
          </td>
          <td valign="top"><br>
          </td>
        </tr>
      </tbody>
    </table>
    <hr size="2" width="100%">
    <h2>目錄</h2>
    <ol>
      <li><a href="#Introduction">功能簡介</a></li>
      <li><a href="#Declaration">類別宣告</a></li>
      <ol>
        <li><a href="#setParent">setParent</a></li>
        <li><a href="#Start">Start</a></li>
        <li><a href="#Stop">Stop</a></li>
        <li><a href="#run">run</a></li>
        <li><a href="#Working">Working</a></li>
      </ol>
      <li><a href="#Examples">使用說明</a></li>
    </ol>
    <hr size="2" width="100%">
    <h2><a name="Introduction"></a>功能簡介</h2>
    Rpc類別的作用是將<a href="XmlRpcServer.html">XmlRpcServer</a>進行封裝，成為一個獨立可以執
    行的遠端行程呼叫伺服器。<br>
    <br>
    如果本機希望提供其他機器函式呼叫服務，您應該考慮使用這個類別來運行遠端行程呼叫伺服器。<br>
    <br>
    類別被建構時，會同時建構兩個<a href="Keywords.html#RPC">RPC</a>通道：<br>
    <ol>
      <li><a href="RpcMethodExists.html">RpcMethodExists</a></li>
      <li><a href="RpcMethodHeartbeat.html">RpcMethodHeartbeat</a><br>
      </li>
    </ol>
    如果您希望與這兩個RPC通道連接功能，您需要使用<a href="#setParent">setParent</a>函式來設定。<br>
    <br>
    <hr size="2" width="100%">
    <h2><a name="Declaration"></a>類別宣告</h2>
    <br>
    <table width="100%" border="0" cellpadding="2" cellspacing="2">
      <tbody>
        <tr>
          <td valign="top">
            <meta name="qrichtext" content="1">
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#808000;">class</span><span style=" color:#c0c0c0;"> </span><span style=" color:#c0c0c0;"></span><span style=" color:#800080;">Rpc</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">:</span><span style=" color:#c0c0c0;"> </span><span style=" color:#808000;">public</span><span style=" color:#c0c0c0;"> </span><span style=" color:#800080;">Thread</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">  </span><span style=" color:#808000;">public</span><span style=" color:#000000;">:</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><a href="XmlRpcServer.html"><span style=" color:#800080;">XmlRpcServer</span></a><span style=" color:#c0c0c0;"> </span><span style=" color:#800000;">RPC</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">explicit</span><span style=" color:#c0c0c0;"> </span><span style=" color:#800080;">Rpc</span><span style=" color:#c0c0c0;">         </span><span style=" color:#000000;">(</span><span style=" color:#808000;">void</span><span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">             </span><span style=" color:#800080;">Rpc</span><span style=" color:#c0c0c0;">         </span><span style=" color:#000000;">(</span><span style=" color:#808000;">const</span><span style=" color:#c0c0c0;"> </span><span style=" color:#800080;">Rpc</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">&amp;</span><span style=" color:#c0c0c0;"> </span>rpc<span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">virtual</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">~</span><span style=" font-style:italic; color:#000000;">Rpc</span><span style=" color:#c0c0c0;">         </span><span style=" color:#000000;">(</span><span style=" color:#808000;">void</span><span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">void</span><span style=" color:#c0c0c0;">     </span><a href="#setParent"><span style=" color:#000000;">setParent</span></a><span style=" color:#c0c0c0;">   </span><span style=" color:#000000;">(</span><span style=" color:#800080;">QObject</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span>parent<span style=" color:#000000;">,</span><span style=" color:#808000;">const</span><span style=" color:#c0c0c0;"> </span><span style=" color:#808000;">char</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span>method<span style=" color:#000000;">,</span><span style=" color:#808000;">const</span><span style=" color:#c0c0c0;"> </span><span style=" color:#808000;">char</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span>login<span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">bool</span><span style=" color:#c0c0c0;">     </span><a href="#Start"><span style=" color:#000000;">Start</span></a><span style=" color:#c0c0c0;">       </span><span style=" color:#000000;">(</span><span style=" color:#808000;">int</span><span style=" color:#c0c0c0;"> </span>port<span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">bool</span><span style=" color:#c0c0c0;">     </span><a href="#Stop"><span style=" color:#000000;">Stop</span></a><span style=" color:#c0c0c0;">        </span><span style=" color:#000000;">(</span><span style=" color:#808000;">void</span><span style=" color:#000000;">)</span><span style=" color:#c0c0c0;">     </span><span style=" color:#000000;">;</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">  </span><span style=" color:#808000;">protected</span><span style=" color:#000000;">:</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><a href="RpcMethodExists.html"><span style=" color:#800080;">RpcMethodExists</span></a><span style=" color:#c0c0c0;">    </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span><span style=" color:#800000;">Exists</span><span style=" color:#c0c0c0;">    </span><span style=" color:#000000;">;</span></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><a href="RpcMethodHeartbeat.html"><span style=" color:#800080;">RpcMethodHeartbeat</span></a><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span><span style=" color:#800000;">Heartbeat</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">virtual</span><span style=" color:#c0c0c0;"> </span><span style=" color:#808000;">void</span><span style=" color:#c0c0c0;"> </span><a href="#run"><span style=" font-style:italic; color:#000000;">run</span></a><span style=" color:#c0c0c0;">     </span><span style=" color:#000000;">(</span><span style=" color:#808000;">int</span><span style=" color:#c0c0c0;"> </span>Type<span style=" color:#000000;">,</span><span style=" color:#800080;">ThreadData</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span>data<span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">    </span><span style=" color:#808000;">virtual</span><span style=" color:#c0c0c0;"> </span><span style=" color:#808000;">void</span><span style=" color:#c0c0c0;"> </span><a href="#Working"><span style=" font-style:italic; color:#000000;">Working</span></a><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span style=" color:#800080;">ThreadData</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span style=" color:#c0c0c0;"> </span>data<span style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#c0c0c0;">  </span><span style=" color:#808000;">private</span><span style=" color:#000000;">:</span></pre>
            <pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br></pre>
            <pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span><span style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span></pre>
            <style type="text/css">
p, li { white-space: pre-wrap; }
</style></td>
        </tr>
      </tbody>
    </table>
    <br>
    <hr size="2" width="100%"> <a name="setParent"></a><span style="
      color:#808000;">void</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#000000;">setParent</span><span style="
      color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#800080;">QObject</span><span style="
      color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span
      style=" color:#c0c0c0;"> </span>parent<span style="
      color:#000000;">,</span><span style=" color:#808000;">const</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">char</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span
      style=" color:#c0c0c0;"> </span>method<span style="
      color:#000000;">,</span><span style=" color:#808000;">const</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">char</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span
      style=" color:#c0c0c0;"> </span>login<span style="
      color:#000000;">)</span><span style=" color:#000000;"></span><br>
    <br>
    設定Exists及Heartbeat兩個<a href="Keywords.html#RPC">RPC</a>通道的上層QObject，
    參數為parent，並且連接Qt信號與插槽到Exists上。<br>
    <br>
    method及login如果為NULL，則不會連接信號。<br>
    <br>
    插槽method將與showMaximized信號連接。<br>
    <br>
    插槽login將與Login(QString,QString)信號連接。<br>
    <br>
    這個函式基本上只能使用一次，不可重覆呼叫，否則會造成信號的多次連接。<br>
    <br>
    <hr size="2" width="100%"><a name="Start"></a><span style="
      color:#808000;">bool</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#000000;">Start</span><span style=" color:#c0c0c0;">
    </span><span style=" color:#000000;">(</span><span style="
      color:#808000;">int</span><span style=" color:#c0c0c0;"> </span>port<span
      style=" color:#000000;">)</span><span style=" color:#000000;"></span><br>
    <br>
    於本機的port端口啟動遠端行程呼叫伺服器，這會啟動一個線緒來執行伺服器端口監聽。<br>
    <br>
    <hr size="2" width="100%"><a name="Stop"></a><span style="
      color:#808000;">bool</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#000000;">Stop</span><span style=" color:#c0c0c0;">
    </span><span style=" color:#000000;">(</span><span style="
      color:#808000;">void</span><span style=" color:#000000;">)</span><span
      style=" color:#000000;"></span><br>
    <br>
    終止遠端行程呼叫伺服器線緒的執行。<br>
    <br>
    <hr size="2" width="100%"><a name="run"></a><span style="
      color:#808000;">virtual</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#808000;">void</span><span style=" color:#c0c0c0;">
    </span><span style=" font-style:italic; color:#000000;">run</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#808000;">int</span><span style=" color:#c0c0c0;"> </span>Type<span
      style=" color:#000000;">,</span><span style=" color:#800080;">ThreadData</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span
      style=" color:#c0c0c0;"> </span>data<span style=" color:#000000;">)</span><span
      style=" color:#000000;"></span><br>
    <br>
    線緒分配函式，Type為10001時，會執行<a href="#Working">Working</a>函式。<br>
    <br>
    <hr size="2" width="100%"><a name="Working"></a><span style="
      color:#808000;">virtual</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#808000;">void</span><span style=" color:#c0c0c0;">
    </span><span style=" font-style:italic; color:#000000;">Working</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#800080;">ThreadData</span><span style="
      color:#c0c0c0;"> </span><span style=" color:#000000;">*</span><span
      style=" color:#c0c0c0;"> </span>data<span style=" color:#000000;">)</span><span
      style=" color:#000000;"></span><br>
    <br>
    這個函式啟動伺服器端口監聽及分配已經連線的通訊。<br>
    <br>
    終止的條件有兩個：<br>
    <ol>
      <li>使用Stop函式終止監聽程序。</li>
      <li>CIOS Thread的主動終止方式。</li>
    </ol>
    <br>
    <hr size="2" width="100%">
    <h2><a name="Examples"></a>使用說明</h2>
    <br>
    <h3>啟動</h3>
    <br>
    <span style=" color:#c0c0c0;"> </span><span style=" color:#808000;">if</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">!</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#800000;">RPC</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">.</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">Start</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">port</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">)</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">)</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">return</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">false</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span>
    <br>
    <br>
    <h3>停止</h3>
    <br>
    <span style=" color:#c0c0c0;"> </span><span style=" color:#800000;">RPC</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">.</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">Stop</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">)</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">;</span>
    <br>
    <br>
    <h3>連接信號</h3>
    <br>
    <span style=" color:#c0c0c0;"> </span><span style=" color:#800000;">plan</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">-&gt;</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#800000;">RPC</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">.</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">setParent</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">this</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">,</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">SLOT</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span>Maximized<span style="
      color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">)</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">)</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">,</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#808000;">SLOT</span><span
      style=" color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#c0c0c0;"> </span>Login<span style="
      color:#c0c0c0;"> </span><span style=" color:#000000;">(</span><span
      style=" color:#800080;">QString</span><span style="
      color:#000000;">,</span><span style=" color:#800080;">QString</span><span
      style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#000000;">)</span><span style=" color:#c0c0c0;"> </span><span
      style=" color:#000000;">;</span>
    <br>
    <br>
    <hr size="2" width="100%">
    <div align="center"><font color="#cc6600"><b><i>Neutrino International Inc. 2001~2015</i></b></font></div>
  </body>
</html>
